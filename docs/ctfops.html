
<html>                                                        
<head>                                                        
   <meta http-equiv="content-type" content="text/html; charset=utf-8">
   <title>CTF Related operations </title>                                          
   <link rel='stylesheet' type='text/css' href='./buttons.css' />

   <link rel='stylesheet' type='text/css' href='./buttons.css' />

</head>                                                                

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="./spider.html"                 id="spider">    </a></td>
  <td><a href="./user_doc.html"               id="work">      </a></td>
  <td><a href="./operations_doc.html"         id="index">     </a></td>
  <td><a href="./documents.html"              id="help">      </a></td>
  <td><a href="./faq.html"                    id="faq">       </a></td>
  <td><a href="./documents.html#2D"           id="techs">     </a></td>
  <td><a href="./techs/recon1a/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="./formats.html"                id="menu">      </a></td>
  <td><a href="./installation.html"           id="install">   </a></td>
  <td><a href="./release.html"                id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web"> </a></td> 
</tr>
</table>
<br><hr>
<!-- End Buttons -->


<br />
<h1 align="center">CTF Related operations </h1>                               <br />                                          

<table border="1" cellpadding="4" cellspacing="4" class="outs">

 <tr valign="top"> <th></th> <th></th> <th><h2>Estimate Defocus / Astigmatism </h2></th> </tr>

   <tr valign="top">
   <th>Operation  </th>
   <th>Purpose    </th>       
   <th>Description</th>  
   <th>Example    </th> 
   <th>Input      </th>
   <th>Outputs    </th>
   <th>Subroutines</th> 
   </tr>

   <tr valign="top">
   <td><a href="man/ctffind.html">'CTF FIND'</a>               </td>
   <td>Estimate defocus and astigmatism from micrograph        </td>
   <td>Estimates 
       <a href="glossary.html#Defocus">defocus</a>,
       <a href="astigmatism.html">astigmatism</a>,  
       and astigmatism angle for  
       <a href="techs/ctf/ctf.html">CTF</a> 
       starting from a micrograph.
       This operation is normally used on a large original 
       micrograph since it can average multiple 2-D power 
       spectra windowed from  the micrograph.  Uses 
       <a href="http://emlab.rose2.brandeis.edu/software">CTFFIND3</a>
       developed by Nikolaus Grigorieff (licensed under the terms of the 
       GNU Public License version 3, GPLv3). 
       Here CTFFIND3 has been modified to output a  
       SPIDER format power spectrum, 
       and to output defocus and astigmatism using SPIDER 
       conventions to operation line registers 
       and to a line in a doc file.                                </td>
   <td><a href="exa/ctffind.html">Usage</a>,              
       <a href="techs/recon1a/Procs/ctffind.spi">ctffind.spi</a>,
       <a href="techs/recon1b/Procs/ctffind.spi">ctffind.spi</a>   </td>
   <td>Microsopy parameters  &amp; Micrograph image                </td>
   <td>Defocus and astigmatism to SPIDER registers, 
       Defocus doc file, &amp; Average power spectrum image        </td>
   <td>ctffind3                                                    </td>
   </tr>

   <tr valign="top">
   <td><a href="man/tfddf.html">'TF DDF'</a>                       </td>
   <td>Estimate defocus and amplitude contrast                     </td>
   <td>Estimates <a href="glossary.html#Defocus">defocus</a>,
       and amplitude contrast ratio 
       (<a href="glossary.html#ACR">ACR</a>) 
       for  <a href="techs/ctf/ctf.html">CTF</a>
       from minima in power spectrum 
       starting with a rotationally averaged 1D power spectrum.
       Input can be single spectrum or a series of spectra. 
       Outputs defocus parameters to operation 
       line registers and to a line in a doc file. 
   <td> --                                                   </td> 
   <td>Microsopy parameters  &amp; 
       Rotationally averaged power spectrum image(s)         </td> 
   <td>Filter doc file                                       </td>
   <td>defocus, defo001, defo003                             </td>
   </tr>

   <tr valign="top">
   <td><a href="man/tfcrf.html">'TF CRF'</a>                 </td>
   <td>Estimate defocus & amplitude contrast                 </td>
   <td>Estimates <a href="glossary.html#Defocus">defocus</a>,
       and amplitude contrast ratio 
      (<a href="glossary.html#ACR">ACR</a>)for
       <a href="techs/ctf/ctf.html">CTF</a>
       based on a cross-resolution 
       curve between a single defocus group volume 
       and a partial CTF-corrected volume.                  
       Outputs defocus parameters to operation line registers.</td>   
   <td>--                                                     </td> 
   <td>Microsopy parameters  &amp; 
       Cross Resolution doc file e.g. output of 
       <a href="man/rf3.html">'RF 3'</a>                      </td>
   <td>Defocus and ACR to operation line registers            </td>
   <td>tfcrf                                                  </td>
   </tr>

   <tr valign="top">
   <td><a href="man/ctfed.html">'CTF ED'</a>                       </td>
   <td>Estimate defocus from micrograph                            </td>
   <td>Legacy operation replaced by 'CTF FIND' due to poor results.</td>
   <td> --                                                         </td> 
   <td> --                                                         </td> 
   <td> --                                                         </td> 
   <td> --                                                         </td> 
   </tr>

   <tr valign="top">
   <td><a href="man/tfed.html">'TF ED'</a>                         </td>
   <td>Estimate defocus from image power spectrum                  </td>
   <td>Legacy operation replaced by 'CTF FIND' due to poor results.</td>
   <td> --                                                         </td> 
   <td> --                                                         </td> 
   <td> --                                                         </td> 
   <td> --                                                         </td> 
   </tr>


 <tr valign="top"> <th></th> <th></th> <th><h2>Generate CTF from Defocus & Parameters </h2></th> </tr>

   <tr valign="top">
   <td><a href="man/tfct.html"> 'TF CT'</a>  (for images)            <br />
       <a href="man/tfct3.html">'TF CT3'</a> (for volumes)           </td>
   <td>Generate a complex, phase flipping, binary, CTF image/volume  </td>
   <td>Generate the phase 
       <a href="techs/ctf/ctf.html">CTF</a> 
       for bright-field electron microscopy. 
       Produces a binary or two-valued (-1,1) transfer function in 
       complex image/volume which can be used for phase flipping. 
       The output CTF function can be used to
       correct the phase of bright-field weak phase contrast image/volume
       using  the 'TF COR' or 'TF CTS' operations.           </td>   
   <td><a href="exa/tfct.html">Usage</a>                     </td> 
   <td>Micrograph parameters                                 </td>
   <td>Complex image/volume                                  </td>
   <td>trafc, traftc3, tfd                                   </td>
   </tr>

  <tr valign="top">
   <td><a href="man/tfc.html"> 'TF C'</a>  (for images)     <br />
       <a href="man/tfc3.html">'TF C3'</a> (for volumes)    </td>
   <td>Generate complex, straight, CTF image                </td>
   <td>Generate the phase 
       <a href="techs/ctf/ctf.html">CTF</a></a>
       for bright-field electron microscopy. 
       Produces a straight transfer function in a complex image/volume. 
       This CTF function can be applied, using the 
       'MU' or 'TF CTS' operations, to the Fourier transform 
       of an object for correcting of the phase of 
       bright-field weak phase contrast.                    </td>   
   <td><a href="exa/tfc.html">Usage</a>.                    </td>
   <td>Micrograph parameters                                </td>
   <td>Complex image/volume                                 </td>
   <td>trafc, trafc3, trafd                                 </td>
   </tr>


   <tr valign="top">
   <td><a href="man/tflis.html">'TF LIS'</a> <br />
       (Replaces <a href="man/tfl.html">'TF L'</a>)         </td>
   <td>Generate CTF functions, in doc file                  </td>
   <td>Generate the phase contrast transfer function for for 
       bright-field electron microscopy. Produces listing of radii, 
       straight transfer function, phase fipping transfer function, 
       trapped straight transfer function, etc. in text form 
       in a doc file. </td> 
   <td><a href="exa/tflis.html">Usage</a>                   </td> 
   <td>Micrograph parameters                                </td>
   <td>CTF doc file                                         </td>
   <td>tfd, trafl, get_tf_input                             </td>
   </tr>

<!--  removed
   <tr valign="top">
   <td><a href="man/tflflip.html">'TF L FLIP'</a>            </td>
   <td>Generate phase flipping, binary CTF, in doc file      </td>
   <td>Generate the phase 
       <a href="techs/ctf/ctf.html">CTF</a> 
       for bright-field electron microscopy. 
       Produces the straight transfer function 
       (or its square, the envelope function), along with 
       a binary or two-valued (-1,1) phase fipping transfer function, 
       and the trapped function.
       Outputs these functions and the radii in text 
       form in a single document file.                        
   <td> 
       <a href="techs/recon1/Procs/make-ctf-cor.spi">make-ctf-cor.spi</a> </td>
   <td>Micrograph parameters                                 </td>
   <td>Filter doc file                                       </td>
   <td>tfd, trafl                                            </td>
   </tr>
 -->


   <tr valign="top">
   <td><a href="man/tf.html">'TF'</a></td>
   <td>Generate image showing effect of defocus on CTF       </td>       
   <td>Generate the phase 
       <a href="techs/ctf/ctf.html">CTF</a> 
       for bright-field electron microscopy for specified defoci. 
       Produces the straight transfer function
       (or its square, the envelope function) 
       within a specified defocus range and using specified 
       electron optical parameters.                            
       Output is in the form of a SPIDER image file.         </td>
   <td><a href="exa/tf.html">Usage</a>                       </td> 
   <td>Micrograph parameters                                 </td>
   <td>Image                                                 </td>
   <td>traf, tf                                              </td> 
   </tr>

   <tr valign="top">
   <td><a href="man/tfd.html">'TF D'</a>                     </td>
   <td>Generate image showing effect of astigmatism on CTF   </td>
   <td>Generate the phase 
       <a href="techs/ctf/ctf.html">CTF</a> 
       for bright-field electron microscopy. 
       Produces the straight transfer function
       (or its square, the envelope function) 
       for a specified defocus and astigmatism using specified 
       electron optical parameters.                           
       Output is in the form of a SPIDER image file.         </td>
   <td><a href="exa/tfd.html">Usage</a>                      </td> 
   <td>Micrograph parameters                                 </td>
   <td>Image                                                 </td>
   <td>tfd, trafd, trafc, trafc3                             </td>
   </tr>

 <tr valign="top"> <th></th> <th></th> <th><h2>CTF Correct image/volume </h2></th> </tr>

   <tr valign="top">
   <td><a href="man/tfcor.html">'TF COR'</a>               </td>
   <td>CTF correction, image/volume                        </td>
   <td><a href="techs/ctf/ctf.html">CTF</a> 
       corrects an image/volume by Wiener filtering. 
          Multiplies the FFT of the input image/volume by 
          the CTF Fourier image. Then reverse FFT transforms 
          this to create output image/volume.    
       Similar to operation: 
       <a href="man/tfcts.html">'TF CTS'</a> 
       without SNR adjustment.                             </td>  
   <td><a href="exa/tfcor.html">Usage</a>,
       <a href="techs/recon/newprogs/recon.spi">refproj.spi</a></td>
   <td>Image/volume &amp; 
       Complex CTF image/volume                            </td>
   <td>Image/volume                                        </td>
   <td>rctfone                                             </td>
   </tr>

   <tr valign="top">
   <td><a href="man/tfcts.html">'TF CTS'</a>               </td>
   <td>CTF correction, with SNR, image/volume              </td>
   <td><a href="techs/ctf/ctf.html">CTF</a> 
       corrects a series of images/volumes  by 
       Wiener filtering. Accumulates 
       a CTF corrected sum over all input images/volumes. 
       Similar to <a href="man/tfcor.html">'TF COR'</a>, 
       but divides summed input 
       images/volumes by the summed squared CTF
       images/volumes and adjusts for SNR.                   </td> 
   <td><a href="exa/tfcts.html">Usage</a>                   
       <a href="techs/recon/newprogs/recon.spi">recon.spi</a></td> 
   <td>Image(s)/volume(s), &amp;
       Complex CTF image(s)/volume(s)                        </td>
   <td>Image(s) / volume (s)                                 </td>
   <td>rctfss                                                </td>
   </tr>

   <tr valign="top">
   <td><a href="man/tfsnr.html">'TF SNR</td>
   <td>CTF correction, with frequency dependent SNR       </td>
   <td><a href="techs/ctf/ctf.html">CTF</a>
       corrects a volume series by 
       Wiener filtering using frequency dependent SNR.  
       Rarely used, may be buggy                          </td>
   <td> --                                                </td> 
   <td>Image(s)/volume(s),  
       Complex image(s)/volume(s), &amp;                  
       SNR doc file                                       </td>
   <td>Image(s) / volume(s)                               </td>
   <td>tfsnr                                              </td>
   </tr>

<tr> <th></th> <th></th> <th><h2>Other CTF related operations </h2></th> </tr>

   <tr valign="top">
   <td><a href="man/tflm4.html">'TF LM4'</a>                </td>
   <td>Determine CTF envelope B-factor and noise parameters </td>
   <td>Apply nonlinear regression to estimate EM image 
       <a href="techs/ctf/ctf.html">CTF</a> envelope 
       B-factor and noise parameters. 
       Outputs to operation line registers and doc file. 
       Operation rarely used.                               </td>
   <td><a href="exa/tflm4.html">Usage</a>                   </td> 
   <td>Rotationally averaged power spectrum image           </td>
   <td>B-factors of envelope function and CTF
       to operation line registers and doc file             </td>
   <td>tflm4                                                </td>
   </tr>


   <tr valign="top">
   <td><a href="man/tfdns.html">'TF DNS'</a>              </td>
   <td>Delete noise background                            </td>
   <td>Calculate the noise background from rotationally 
       averaged 1-D power spectrum and correct it. 
       The background is assumed to be a Gaussian profile:  
        <i>a1 * exp[-(k/a2)**2] + a3 </i>. 
       The output file is used by 
       <a href="man/tfdev.html">'TF DEV'</a> 
       for envelope function fitting.                     </td>  
   <td><a href="exa/tfdns.html">Usage</a>, &nbsp; 
       <a href="exa/images/tfdns.spi">tfdns.spi</a>       </td>
   <td>Rotationally averaged power spectrum image         </td>
   <td>Background corrected rotationally averaged power spectrum image </td>
   <td>noise, defo003                                     </td>
   </tr>

   <tr valign="top">
   <td><a href="man/tfdev.html">'TF DEV'</a>              </td>
   <td>Determine envelope function                        </td>
   <td>Use a least-squares method to determine the parameters 
       of envelope functions of the 
       <a href="techs/ctf/ctf.html">CTF</a> 
       from rotationally averaged power spectra images.   </td>
   <td> --                                                </td> 
   <td>Background corrected rotationally averaged power spectrum image </td>
   <td>1D image(s)                                        </td>
   <td>envelope                                           </td>
   </tr>

   <tr valign="top">
   <td><a href="man/tfsim.html">'TF SIM'</a>              </td>
   <td>Simulate an electron microscope image              </td>
   <td>Simulate a bright field electron microscope image 
       of a structure by using complex atomic scattering 
       amplitudes. Atomic information of the 
       structure must be provided in the form of 
       a PDB file.                                        </td>
   <td> --                                                </td> 
   <td>PDB file                                           </td>
   <td>Image                                              </td>
   <td>trafsim                                            </td>
   </tr>

</table>

<br />
<br />

<hr /> 

<p><small>
Source:      ctfops.html     &nbsp;&nbsp;&nbsp;
Last update: 29 June 2016    &nbsp;&nbsp;&nbsp;
</small>

</body>
</html>
