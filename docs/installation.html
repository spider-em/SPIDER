<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<style type="text/css"> 
   { font-family:Courier,"Courier New",monospace;}
</style>

<title>SPIDER Installation on Linux</title>
   <link rel='stylesheet' type='text/css' href='./buttons.css' />

</head>

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="./spider.html"                   id="spider">    </a></td>
  <td><a href="./user_doc.html"                 id="work">      </a></td>
  <td><a href="./operations_doc.html"           id="index">     </a></td>
  <td><a href="./documents.html"                id="help">      </a></td>
  <td><a href="./faq.html"                      id="faq">       </a></td>
  <td><a href="./documents.html#2D"             id="techs">     </a></td>
  <td><a href="./techs/recon1a/Docs/mr1.html"   id="recon">     </a></td>
  <td><a href="./formats.html"                  id="menu">      </a></td>
  <td><a href="./installation.html"             id="install">   </a></td>
  <td><a href="./release.html"                  id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web">       </a></td>
</tr>
</table>
<br /> <hr />
<!-- End Buttons -->

<p />
<h1 align="center">SPIDER Installation </h1>

<hr />
<h3>Contents</h3>

<ol>
   <li><a href="#loading">LOADING THE DISTRIBUTION</a> </li>
   <li><a href="#installation">INSTALLATION</a>        </li>
   <li><a href="#run">RUNNING SPIDER</a>               </li>
   <li><a href="#testing">TESTING SPIDER</a>           </li>
   <li><a href="#documentation">DOCUMENTATION</a>      </li>
   <li><a href="#bugs">BUGS</a>                        </li>
</ol>

<hr />

<ol>

   <li>
   <h3><a name="loading">LOADING THE SPIDER DISTRIBUTION</a></h3>

   <ol>
   <p> <li>Download <a href="spi-download.html">SPIDER</a> from Github  
       and place it in an appropriate directory: <i>PARENT-DIR</i>. <br /> 
	    
       (If you also wish to  
       <a href="https://spider-em.github.io/Web">install Web</a> download it 
       from Github and place it in the same directory: <i>PARENT-DIR</i>.) 
       </li></p>   
    
   <p> <li>Uncompress and unpack the SPIDER tar archive e.g.    <br />
       <kbd>tar -xzvf spider.27.01.tar.gz</kbd>
       </li>  </p>


   <p>The following SPIDER directories will be created under: <i>PARENT-DIR</i>): </p>

   <table border="1" cellpadding="4" cellspacing="4">
   <tr>
   <th halign="left">Directory</th>
   <th halign="left">Contents</th>
   </tr>

   <tr>
   <td>spider/src</td>
   <td>SPIDER source code, SPIDER libraries</td>
   </tr>

   <tr>
   <td>spider/bin</td>
   <td>SPIDER executables</td>
   </tr>

   <tr>
   <td>spider/docs</td>
   <td>SPIDER documentation, html pages</td>
   </tr>

   <tr>
   <td>spider/proc</td>
   <td>Sample procedure files</td>
   </tr>

   <tr>
   <td>spider/fftw</td>
   <td><a href="./fftw.html">FFTW</a> code and libraries</td>
   </tr>

   <tr>
   <td>spider/man</td>
   <td>Operation manual pages, Nextresults</td>
   </tr>

   </table>
   </ol>
</li>

<li>
<h3><a name="installation">INSTALLATION</a></h3>

   <ul>
   <li> <h4>Executables</h4>

  The SPIDER distribution should contain the following executable files in the
  <a href="../bin"><i>spider/bin</i></a> directory 
  and Makefiles in the
  <a href="../src"><i>spider/src</i></a> directory.  In addition the
  <a href="../src/Makefile_samples"><i>spider/src/Makefile_samples</i></a> directory
  contains a number of other sample Makefiles for AIX, legacy systems, and alternative
  compilers. 

<p></p>

<table border="1" cellpadding="4" cellspacing="5">
   <tr>
   <th>SPIDER</th>
   <th>Optimal         <br />
       processor</th>
   <th>Optimal         <br />
       byte order</th>
   <th>"Makefile"</th>
   <th>Compiler</th>
   </tr>

   <tr>
   <td>spider_linux_mp_intel</td>
   <td>Intel Xeon 32 bit OS (1+ processors)</td>
   <td>Big endian</td>
   <td><a href="../src/Makefile_linux_mp_intel">Makefile_linux_mp_intel</a></td>
   <td> PGI Fortran compiler</td>
   </tr>

   <tr>
   <td>spider_linux_mp_intel64</td>
   <td>Intel Xeon 64 bit OS (1+ processors)</td>
   <td>Big endian</td>
   <td><a href="../src/Makefile_linux_mp_intel64">Makefile_linux_mp_intel64.ifort</a></td>
   <td> Intel ifort compiler</td>
   </tr>

   <tr>
   <td>spider_linux_mp_opt64</td>
   <td>AMD Opteron 64 bit OS (1+ processors)</td>
   <td>Big endian</td>
   <td><a href="../src/Makefile_linux_mp_opt64">Makefile_linux_mp_opt64</a></td>
   <td> PGI Fortran compiler</td>
   </tr>

   
</table>

<p></p>
</li>


<li> <h4><a name="setting">Setting <i>"spider"</i> Command</a> and 
                          Environment variables</h4>

   <p>
   You will need to tell your system the location of your
   executables, and other SPIDER system files. You should edit 
   <i>PARENT_DIR</i> in the following lines to point to the location 
   of the <i>SPIDER</i> installation on your system. 
   Then place all of the following set of lines in your 
   <i>.cshrc</i> or <i>.bashrc</i>  startup file.   
   (If you do not have such a startup  file in your home directory 
   you can create it with any text editor.)
   <p />

   <p>
   <dl>
   <dt>Using the <i>'C'</i> shell:             </dt>
   <dd> <kbd>
   setenv SPIDER_DIR       "PARENT_DIR/spider" <br />
   setenv SPBIN_DIR  &nbsp;"$SPIDER_DIR/bin/"  <br />
   setenv SPMAN_DIR  &nbsp;"$SPIDER_DIR/man/"  <br />
   setenv SPPROC_DIR       "$SPIDER_DIR/proc/" <br />

   if ( $?path ) then                          <br />
      &nbsp;&nbsp;set path=($path $SPBIN_DIR)  <br />
   else                                        <br />
      &nbsp;&nbsp;set path=($SPBIN_DIR)        <br />
   endif                                       <br />
   </kbd></dd>
   </p>

   <p>
   <dt>Using the <i>'bash'</i> shell:          </dt>
   <dd><kbd>
   export SPIDER_DIR="PARENT_DIR/spider"       <br />
   export SPBIN_DIR="$SPIDER_DIR/bin/"         <br />
   export SPMAN_DIR="$SPIDER_DIR/man/"         <br />
   export SPPROC_DIR="$SPIDER_DIR/proc/"       <br />
   export PATH="${SPIDER_DIR}/bin:${PATH}"     <br />
   </kbd></dd>
   </p>
   </dl>

<p> Note: Do not use a <i>~username</i> construct in the SPIDER_DIR 
    path or SPIDER will be unable to find the Results file naming script.
    </p>

<p>Finally rename the desired <i>spider_linux</i> executable in 
   <i>PARENT_DIR/spider/bin</i> to: <i>spider</i> for easy access. 
   </li>

   <p></p>

<li> <h4>FFTW Libraries</h4>

The SPIDER executables are statically linked
with necessary <a href="./fftw.html">FFTW</a>
libraries. You do not need to have shared run-time
FFTW libraries on your system when using SPIDER's supplied binaries.
These are supplied in case you compile/link your own SPIDER. 
<p></p>

<li> <h3><a name="compiling">Compiling and Linking SPIDER.</a></h3>

If you wish to use SPIDER with MPI you will have to compile and link
SPIDER on your system.   This is necessary due to the tight coupling
of the MPI library within the compilation and large differences among
MPI distributions. <p />

If you wish to use MPI, or modify SPIDER source code, or link SPIDER with
different libraries, or compile SPIDER with different compilation
options (e.g. optimize speed for your processors) you will have to
have a Fortran 2003+ compiler on your system. See 
<a href="compile-linux.html">SPIDER Compilation and Linking on
Linux</a> documentation for further information.</li>

</ul>
</li>

<li> <h3><a name="run">RUNNING SPIDER</a></h3>

<p>Run SPIDER in a terminal window: <b>spider three-character-data-extension </b>
   </dl>
</blockquote>

<p>All SPIDER data files will have the three-character-data-extension (called a
   datacode within SPIDER) added automatically inside SPIDER.</p>

<p>The SPIDER "RESULTS" files are named <i>results.ext.?</i> where
   <i>ext</i> is the datacode and "?" is a version number  which is
   incremented over any existing results file version in that directory.</p>

</li>


<li> <h3><a name="testing">TESTING SPIDER</a></h3>
   Some <a href="testing.html">simple tests</a> are available to see
   if SPIDER is operating correctly.

   <p>If SPIDER does not run:</p>
 
   <ul>
   <li> <dl><dt>If you get an error message like: <i>command not found</i> 
      <dd> See "<a href="#setting">Setting <i>'spider'</i> command</a>" 
      above to ensure that your desired executable is accessible.
   </dd></dl></li></p> 

   <li><dl><dt>If you get a error message about a missing library:</dt>
   <dd>  The executables distributed with SPIDER are mostly statically linked 
      so this should not be a problem. Any missing libraries are probably system
      libraries (unless you are trying to use the MPI version of SPIDER). 
      You can use: <i>ldd your-spider-executable</i> to investigate missing libraries.
   </dd></dl></li><p /> 

   <li><dl><dt>If SPIDER runs but complains about the 'Nextresults' 
       script which increments the Results file version number   </dt>
   <dd> Your Linux distribution (e.g. Ubuntu) may have a non-standard sort operation. 
      <dl>                                                                 
      <dt> Edit: <a href="../bin/Nextresults">spider/bin/Nextresults</a> and replace:</dt>
      <dd><i> lastfi=`(\ls $1.[0-9]* | sort -t. +2n | tail -1)` </i>  </dd>  
      <dt>with</dt>                                                                   
      <dd><i> lastfi=`(\ls $1.[0-9]* | sort -t. -k2 -n | tail -1)`</i> </dd> 
      </dl>
   </dd></dl></li></p> 

   <li><dl><dt>If SPIDER still does not run</dt>
   <dd>Please contact us at the address below.
   </dd></dl></li></p> 
 </dl>

</ul>
</li>

<li> <h3><a name="documentation">DOCUMENTATION</a></h3>
   There is an <a href="documents.html">overview</a> of SPIDER
   documentation in the file: <i>documents.html</i> in the
   <i>SPIDER_DIR/docs</i> sub-directory. All SPIDER documentation is
   included with the distribution and is accessible via your
   Web browser. Just point your browser at: 
   <a href="spider.html">SPIDER_DIR/docs/spider.html</a>
</li>

<li> <h3><a name="bugs">BUGS, SUGGESTIONS</a></h3>

In the event that you have questions about methodologies or wish to
report bugs please send us <b>complete info</b> on what you are
trying to do, including the operating system, SPIDER executable,
relevant results files, procedure files, and error messages.  The
more complete the info the faster the response.

<p>Send this info to:
   <a href="mailto:spiderem.software@gmail.com">spiderem.software@gmail.com</a>.
   (Is anybody still alive to read this email?)</p>
</li>

</ol>

<p />

<hr />

<small>Source: spider-inst-linux.html &nbsp;&nbsp;&nbsp; 
       Last update: 11 Mar 2025      &nbsp;&nbsp;&nbsp; 
       ArDean Leith </small>

</body>
</html>
