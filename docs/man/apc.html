<head>
<title>SPIDER: AP C (Rotation Alignment - classification, unknown references ||)</title>
   <link rel='stylesheet' href='niceman.css' type='text/css' />
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                 id="spider">    </a></td>
  <td><a href="../user_doc.html"               id="work">      </a></td>
  <td><a href="../operations_doc.html"         id="index">     </a></td>
  <td><a href="../documents.html"              id="help">      </a></td>
  <td><a href="../faq.html"                    id="faq">       </a></td>
  <td><a href="../documents.html#2D"           id="techs">     </a></td>
  <td><a href="../techs/recon1a/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"                id="menu">      </a></td>
  <td><a href="../installation.html"           id="install">   </a></td>
  <td><a href="../release.html"                id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web"> </a></td> 
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>AP C - Rotation Alignment - classification, unknown references ||</h2>
<em>(03/21/12)</em><br />
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Rotationally aligns an image series with an optional check
of its mirrored position and at the same time classifies
the images into a specified number of groups.
&nbsp; <a href="../exa/apc.html">Example</a>.
</dl>
<p>
<dl><dt><strong>SEE ALSO</strong>
<p>
<dd><table><tr><td><a href="apsh.html"><strong>AP SH</strong></a></td><td> [Alignment - multi-reference, exhaustive rotation & shift ||*]</td></tr>
<tr><td><a href="apref.html"><strong>AP REF</strong></a></td><td> [Alignment - multi-reference, rotation & shift ||*]</td></tr>
<tr><td><a href="apsa.html"><strong>AP SA</strong></a></td><td> [Alignment - reference free, Shift ||]</td></tr>
<tr><td><a href="apsr.html"><strong>AP SR</strong></a></td><td> [Alignment - reference free, Shift & Rotation ||]</td></tr>
</table></dl>
<p>
<dl><dt><strong>USAGE</strong></dt>
<p>
<dd>.OPERATION: AP C<br />
<p>
<dd>.INPUT FILE TEMPLATE (E.G. PIC****): IMG***<br />
[Give a template for existing image file series
to be aligned]
<p>
.FILE NUMBERS OR SELECTION DOC. FILE NAME: 1-700<br />
[Enter projection file numbers or the name of the document file
containing projection file numbers in the first register.]
<p>
.FIRST, LAST RING, &amp; RING SKIP: 5, 15, 1<br />
[Only polar rings with the radii in the range 5-15 (in pixel units)
will be analyzed. If skip=0 or 1 then each ring between 5 and 15
will be taken; for skip=2 each second, and so on.]
<p>
.ANALYZE FULL OR HALF RING? (F/H): F<br />
[Use 'F' for analyzing complete ring with real data.
Use 'H' for analyzing half ring containing
autocorrelation function.]
<p>
.NORMALIZE UNDER THE MASK? (N/Y): Y<br />
[Use 'Y', for negative stain data to normalize for the
negative stain effect.]
<p>
.NUMBER OF GROUPS, NUMBER OF ITERATIONS: 5, 30<br />
[Number of groups the images will be divided into and upper limit of
iterations permitted (to avoid infinite loop in the case of lack of
convergence)]
<p>
.CHECK MIRRORED POSITIONS? (N/Y): N<br />
[Optional check of the mirrored images.]
<p>
.GROUP SELECTION DOC FILE TEMPLATE: grp***<br />
[Enter template for name of the document files where
numbers of images assigned to each group will be placed.
One selection doc file will be created for each group.]
<p>
.CLASSIFICATION &amp; ALIGNMENT DOC FILE: apca001<br />
[Document file with classification nd rotational alignment results.
This is the only output produced by this operation. It contains
4 register columns:
<p>
<table border="0" cellpadding="1">
<tr><td>Register</td> <td align="left"> &nbsp;&nbsp; Contents </td> </tr>
<p>
<tr><td> 1</td> <td> &nbsp;&nbsp; Image file number (May have gaps) </td> </tr>
<tr><td> 2</td> <td> &nbsp;&nbsp; Rotation angle </td> </tr>
<tr><td> 3</td> <td> &nbsp;&nbsp; Distance from total average (similarity measure),
Distance &lt;0 indicates image must be mirrored</td> </tr>
<tr><td> 4</td> <td> &nbsp;&nbsp; Classification group number</td> </tr>
</table>
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>Note that the rotation parameters produced by this operation
are given with the proper signs. This means that to rotate the images
afterwards, these parameters should be applied directly (without
sign reversal). To combine parameters given by repeated
alignments, the 'SA P' operation can be used. (Only the angle signs
used for 3-D reconstruction from tilted series need to be reversed.)
<p>
<li>Usage example:
<a href="../techs/align2d/rotkm-ali.spi ">rotkm-ali.spi</a>
<p>
<li>Implemented by Paul Penczek. For details see appendix in:
P.A.Penczek, J.Zhu, &amp; J.Frank.
<i>A common-lines based method for determining orientations
for N&gt;3 particle projections simultaneously.</i/>
Ultramicroscopy, 63, 205-218 (1996).
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/hali.f">HALI</a>, <a href="../../src/normas.f">NORMAS</a>, <a href="../../src/alrq.f">ALRQ</a>, <a href="../../src/fouring.f">FOURING</a>, <a href="../../src/crosrng.f">CROSRNG</a>, <a href="../../src/updtc.f">UPDTC</a>, <a href="../../src/ener.f">ENER</a>, <a href="../../src/seeds.f">SEEDS</a>, <a href="../../src/hkmc.f">HKMC</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/util4.f">UTIL4</a> 
</dl>
</body>
</html>