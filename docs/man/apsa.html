<head>
<title>SPIDER: AP SA (Alignment - reference free, Shift ||)</title>
   <link rel='stylesheet' href='niceman.css' type='text/css' />
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                 id="spider">    </a></td>
  <td><a href="../user_doc.html"               id="work">      </a></td>
  <td><a href="../operations_doc.html"         id="index">     </a></td>
  <td><a href="../documents.html"              id="help">      </a></td>
  <td><a href="../faq.html"                    id="faq">       </a></td>
  <td><a href="../documents.html#2D"           id="techs">     </a></td>
  <td><a href="../techs/recon1a/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"                id="menu">      </a></td>
  <td><a href="../installation.html"           id="install">   </a></td>
  <td><a href="../release.html"                id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web"> </a></td> 
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>AP SA - Alignment - reference free, Shift ||</h2>
<em>(3/21/12)</em><br />
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Reference free shift alignment of an image series.
This operation together with operation 'AP RA' (rotational alignment)
constitutes a reference-free approach to alignment of
2D images. A detailed description of the method can
be found in "Three-dimensional reconstruction of single
particles embedded in ice". P.Penczek et al., Ultramicroscopy,
40 (1992) 33-53. An example of the SPIDER procedure
implementing the alignment is included below.
&nbsp; <a href="../exa/apsa.html">Example</a>.
</dl>
<p>
<dl><dt><strong>SEE ALSO</strong>
<p>
<dd><table><tr><td><a href="voea.html"><strong>VO EA</strong></a></td><td> [Vector Operation - Create Doc File Containing Evenly Spaced Angles]</td></tr>
<tr><td><a href="vomd.html"><strong>VO MD</strong></a></td><td> [Vector Operation - angular Document file from 'AP MD' output]</td></tr>
<tr><td><a href="apc.html"><strong>AP C</strong></a></td><td> [Rotation Alignment - classification, unknown references ||]</td></tr>
<tr><td><a href="apsr.html"><strong>AP SR</strong></a></td><td> [Alignment - reference free, Shift & Rotation ||]</td></tr>
<tr><td><a href="apra.html"><strong>AP RA</strong></a></td><td> [Alignment - Reference free, Rotation ||]</td></tr>
</table></dl>
<p>
<dl><dt><strong>USAGE</strong></dt>
<p>
<dd>.OPERATION: AP SA<br />
<p>
<dd>.INPUT FILE TEMPLATE (E.G. PIC****): img****<br />
[Give the template name of the existing file series to be aligned.]
<p>
.DOCUMENT FILE CONTAINING GROUP ASSIGNMENT: FALDOC<br />
[Document file name produced by 'AP RA' or 'AP C'.]
<p>
.GROUP NUMBER: 1<br />
[Give 1 for output of 'AP RA' or give any valid group
number coming from 'AP C'.]
<p>
.CHECK 180 DEGREE ROTATION? (Y/N): N<br />
[Answer 'Y' should be given only if the images to be processed
were on previous step aligned by 'AP RA' or 'AP C 'with option
Half ring, which means that auto-correlation functions were aligned.
Answer 'N' speeds up of this operation.]
<p>
.ALIGNMENT DOCUMENT FILE: aligndoc<br />
[This is one of the the two outputs produced by this procedure.
It contains 6 columns:
<p>
<table border="0" cellpadding="1">
<tr><td>Register</td> <td align="left"> &nbsp;&nbsp; Contents </td> </tr>
<p>
<tr><td> 1</td> <td> &nbsp;&nbsp; Image file number (May have gaps) </td> </tr>
<tr><td> 2</td> <td> &nbsp;&nbsp; Rotation angle </td> </tr>
<tr><td> 3</td> <td> &nbsp;&nbsp; Distance from total rotational average (similarity measure) </td> </tr>
<tr><td> 4</td> <td> &nbsp;&nbsp; X shift</td> </tr>
<tr><td> 3</td> <td> &nbsp;&nbsp; Y Shift</td> </tr>
<tr><td> 5</td> <td> &nbsp;&nbsp; Classification group number</td> </tr>
<tr><td> 6</td> <td> &nbsp;&nbsp; Distance from the average found by 'AP SA' </td> </tr>
</table>
<p>
The rotation angle is obtained from the input document file and 180 degrees is added
if found to be needed by this operation.]
<p>
.OUTPUT AVERAGE FILE: avg_img_001<br />
[Average image as found by the procedure.]
<p>
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>The less surrounding noise is included
the faster operation runs and results are better.
<p>
<li>Note that shift parameters produced by this operation
are given with the proper signs. To shift the images
afterwards these parameters should be applied directly (without
sign reversion). To combine parameters given by repeated
alignment 'SA P' operation has to be used. The angle signs used
for 3-D reconstruction from tilted series have to be reversed.
<p>
<li>Implemented by Paul Penczek.
<p>
<li>Usage example:
<a href="../techs/align2d/ref-free-apsara-ali.spi ">ref-free-apsara-ali.spi</a>
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/saqb.f">SAQB</a>, <a href="../../src/updtf.f">UPDTF</a>, <a href="../../src/cop.f">COP</a>, <a href="../../src/mlc.f">MLC</a>, <a href="../../src/shfc_2.f">SHFC_2</a>, <a href="../../src/sh180_2.f">SH180_2</a>, <a href="../../src/quadri.f">QUADRI</a>, <a href="../../src/shfm_2.f">SHFM_2</a>, <a href="../../src/cr180_2.f">CR180_2</a>, <a href="../../src/fmrs_2.f">FMRS_2</a>, <a href="../../src/fmr_1.f">FMR_1</a>, <a href="../../src/fftmcf.f">FFTMCF</a>, <a href="../../src/findmx.f">FINDMX</a>, <a href="../../src/enfr_2.f">ENFR_2</a>, <a href="../../src/rtq.f">RTQ</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/util4.f">UTIL4</a> 
</dl>
</body>
</html>