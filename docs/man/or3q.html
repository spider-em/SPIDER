<head>
<title>SPIDER: OR 3Q (ORientation search - 3D, Eulerian angles ||)</title>
   <link rel='stylesheet' href='niceman.css' type='text/css' />
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                 id="spider">    </a></td>
  <td><a href="../user_doc.html"               id="work">      </a></td>
  <td><a href="../operations_doc.html"         id="index">     </a></td>
  <td><a href="../documents.html"              id="help">      </a></td>
  <td><a href="../faq.html"                    id="faq">       </a></td>
  <td><a href="../documents.html#2D"           id="techs">     </a></td>
  <td><a href="../techs/recon1a/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"                id="menu">      </a></td>
  <td><a href="../installation.html"           id="install">   </a></td>
  <td><a href="../release.html"                id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web"> </a></td> 
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>OR 3Q - ORientation search - 3D, Eulerian angles ||</h2>
<em>(06/01/13)</em><br />
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Determines relative orientation of two cubic volumes
in terms of three <a href="../euler.html">Eulerian angles</a>. Rotation is around the
SPIDER volume center (NX/2+1, NY/2+1, NZ/2+1).
&nbsp; <a href="../exa/or3q.html">Example</a>.
</dl>
<p>
<dl><dt><strong>SEE ALSO</strong>
<p>
<dd><table><tr><td><a href="or3a.html"><strong>OR 3A</strong></a></td><td> [ORientation search - 3D, Eulerian angles, arbitrary center ||]</td></tr>
</table></dl>
<p>
<dl><dt><strong>USAGE</strong></dt>
<p>
<dd>.OPERATION: OR 3Q [phi],[theta],[psi],[cc]<br />
</dd> <dd>[Find orientation info. This operation can return up to 4
optional register variables:
<table class="regvar">
<tr><td class="first" align="left"> Variable</td> <td align="left"> Example </td> <td align='left'> Receives </td> </tr>
<tr><td class="first"> First </td> <td>[phi] </td><td><a href="../euler.html">Euler angle</a>: phi </td> </tr>
<tr><td class="first"> Second </td> <td>[the] </td><td><a href="../euler.html">Euler angle</a>: theta </td> </tr>
<tr><td class="first"> Third </td> <td>[psi] </td><td><a href="../euler.html">Euler angle</a>: psi </td> </tr>
<tr><td class="first"> Fourth </td> <td>[cc] </td><td>Cross-correlation coefficient </td> </tr>
</table>
<p>
.REFERENCE VOLUME: VOL001<br />
[Enter name of the file containing the reference volume.]
<p>
.EXPERIMENTAL VOLUME: VOL002<br />
[Enter name of the file containing the volume to be matched
with the reference file.]
<p>
.MASK RADIUS: 14<br />
[The correlation coefficient is calculated only inside a sphere
of the specified radius.]
<p>
.INITIAL EULERIAN ANGLES PHI,THETA,PSI: 76.0, 45.0, 275.0<br />
[Enter three <a href="../euler.html">Eulerian angles</a> defining a starting position
for optimization procedure.]
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>The <a href="../euler.html">Eulerian angles</a> agree with the convention used in SPIDER.
In particular, to rotate the second volume to the orientation
of the reference volume, the command 'RT 3D' must be used
with the angles determined by this operation. To rotate the
reference volume to the position of the second volume, the
following transformation must be applied: phi' = -psi,
theta' = -theta, psi' = -phi. The 'primed' angles are then applied
to the reference volume in 'RT 3D'.
<p>
<li>In most cases it is sufficient to use the input volumes
interpolated to the smaller dimensions, for example, 2-fold
smaller. The accuracy is excellent, and the gain in speed for
this example is eightfold. It is recommended that different
initial <a href="../euler.html">Eulerian angles</a> be tried to verify the results.
<p>
<li>If two volumes are shifted with respect to one another, the 3D
cross-correlation function must be used after (or before) the
rotational search, and the whole procedure must be repeated to
determine the best orientation.
<p>
<li>Implemented by P. Penczek.
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/qali.f">QALI</a>, <a href="../../src/qnrf.f">QNRF</a>, <a href="../../src/uqu.f">UQU</a>, <a href="../../src/fcnq.f">FCNQ</a>, <a href="../../src/amoeba.f">AMOEBA</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/util3.f">UTIL3</a> 
</dl>
</body>
</html>