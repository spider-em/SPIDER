<head>
<title>SPIDER: CP TO CCP4 (Copy SPIDER file To CCP4 format file)</title>
<link rel='stylesheet' href='niceman.css' type='text/css' />
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>
<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                id="spider">    </a></td>
  <td><a href="../user_doc.html"              id="work">      </a></td>
  <td><a href="../operations_doc.html"        id="index">     </a></td>
  <td><a href="../documents.html"             id="help">      </a></td>
  <td><a href="../faq.html"                   id="faq">       </a></td>
  <td><a href="../documents.html#2D"          id="techs">     </a></td>
  <td><a href="../techs/recon1/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"               id="menu">      </a></td>
  <td><a href="../installation.html"          id="install">   </a></td>
  <td><a href="../release.html"               id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web"> </a></td> 
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>CP TO CCP4 - Copy SPIDER file To CCP4 format file</h2>
<em>(3/01/06)</em><br />
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Copies a SPIDER-format file into a CCP4 format file.
</dl>
<p>
<dl><dt><strong>SEE ALSO</strong>
<p>
<dd><table><tr><td><a href="cpfromascii.html"><strong>CP FROM ASCII</strong></a></td><td> [Copy ASCII text file to SPIDER file]</td></tr>
<tr><td><a href="cpfromccp4.html"><strong>CP FROM CCP4</strong></a></td><td> [Copy CCP4 format File to SPIDER file]</td></tr>
<tr><td><a href="cpfromemi.html"><strong>CP FROM EMI</strong></a></td><td> [Copy EMISPEC format file to SPIDER file]</td></tr>
<tr><td><a href="cpfrommrc.html"><strong>CP FROM MRC</strong></a></td><td> [Copy Old MRC format file to SPIDER file]</td></tr>
<tr><td><a href="cpfromnik.html"><strong>CP FROM NIK</strong></a></td><td> [Copy Nikon Coolscan format file to SPIDER file]</td></tr>
<tr><td><a href="cpfrompdb.html"><strong>CP FROM PDB</strong></a></td><td> [Copy PDB file to SPIDER format]</td></tr>
<tr><td><a href="cpfromraw.html"><strong>CP FROM RAW</strong></a></td><td> [Copy Raw Image to SPIDER file]</td></tr>
<tr><td><a href="cpfromterm.html"><strong>CP FROM TERM</strong></a></td><td> [Copy Terminal input to SPIDER image/volume]</td></tr>
<tr><td><a href="cpfromvax.html"><strong>CP FROM VAX</strong></a></td><td> [Copy VAX SPIDER file to a Unix SPIDER file]</td></tr>
<tr><td><a href="cpfromxp.html"><strong>CP FROM XP</strong></a></td><td> [Copy X-PLOR ASCII file to SPIDER file]</td></tr>
<tr><td><a href="cptoascii.html"><strong>CP TO ASCII</strong></a></td><td> [Copy SPIDER file to ASCII text format]</td></tr>
<tr><td><a href="cptobrix.html"><strong>CP TO BRIX</strong></a></td><td> [Copy SPIDER volume to BRIX file for "O" input]</td></tr>
<tr><td><a href="cptoccp4.html"><strong>CP TO CCP4</strong></a></td><td> [Copy SPIDER file To CCP4 format file]</td></tr>
<tr><td><a href="cptomrc.html"><strong>CP TO MRC</strong></a></td><td> [Copy SPIDER file To MRC format file]</td></tr>
<tr><td><a href="cptoopend.html"><strong>CP TO OPEND</strong></a></td><td> [Copy SPIDER file To Opposite Byte Endian]</td></tr>
<tr><td><a href="cptopost.html"><strong>CP TO POST</strong></a></td><td> [Copy SPIDER image to a POSTscript image]</td></tr>
<tr><td><a href="cptoraw.html"><strong>CP TO RAW</strong></a></td><td> [Copy SPIDER file to a 8-bit raw image]</td></tr>
<tr><td><a href="cptotiff.html"><strong>CP TO TIFF</strong></a></td><td> [Copy SPIDER file to a TIFF format]</td></tr>
<tr><td><a href="cptoxplor.html"><strong>CP TO XPLOR</strong></a></td><td> [Copy SPIDER volume to X-PLOR format]</td></tr>
</table></dl>
<p>
<dl><dt><strong>USAGE</strong></dt>
<p>
<dd>.OPERATION: CP TO CCP4<br />
<p>
<dd>.SPIDER INPUT: spiin01<br />
[Enter the SPIDER file you want to copy.]
<p>
.CCP4 OUTPUT FILE NAME: ccpout<br />
[Enter name for CCP4 format output file.]
<p>
.ENTER DATA LENGTH FOR CCP4 FILE (8 OR 32 BITS): 32<br />
[Can create either a CCP4 MODE=0 file containing 8 bit
integer values or CCP4 MODE=2 file containing 32 bit
floating point values with currrent machine byte-ordering.]
<p>
.ENTER STARTING X,Y, &amp; Z OF CCP4 IMAGE: &lt;CR><br />
[Default value for Start:((NX/2)+ 1, (NY/2)+1),
(NZ/2)+1 <br />
(+1 ADDED ONLY IF AXIS LENGTH IS ODD) <br />
Enter &lt;CR&gt; if you want to use the default values.]
<p>
.ENTER ANGSTROMS/PIXEL FOR X, Y, &amp; Z AXIS: 12.0, 12.0, 5.0<br />
[Angstrom/pixel scale will be be multiplied by the
number of pixels in each axis to get the cell dimensions.]
<p>
.ENTER X,Y &amp; Z ORIGIN OF CCP4 IMAGE: &lt;CR><br />
[Default value for origin:((NX/2)+ 1, (NY/2)+1),
(NZ/2)+1 <br />
(+1 ADDED ONLY IF AXIS LENGTH IS ODD) <br />
Enter &lt;CR&gt; if you want to use the default values.]
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>Can not copy SPIDER Fourier format files or SPIDER stacks.
<p>
<li>Operation attempts to compenstate for non-native byte
order execution.
<p>
<li>Procedure "fit_ccp4_to_pdb.spi" below
creates a CCP4 file aligned for use in 'O'.
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/copyccp4.f">COPYCCP4</a>, <a href="../../src/sethedccp4.f">SETHEDCCP4</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/copy1.f">COPY1</a> 
</dl>
<pre><pre>
; fit_ccp4_to_pdb.spi
;
; THIS PROCEDURE ORIENTS AND SHIFTS A SPIDER VOLUME THAT HAS BEEN CONVERTED TO
; A BRIX VOLUME BY "CP TO BRIX" AND HAS BEEN USED (THE BRIX VOLUME) TO
; FIT A PDB STRUCTURE USING "O" OR REAL SPACE REFINEMENT (RSR). THE OUTPUT 
; OF THIS PROCEDURE IS A CCP4 VOLUME WHICH IS AT THE CORRECT LOCATION AND 
; ORIENTATION AS THAT OF THE FITTED PDB STRUCTURE. THIS CAN BE VISUALIZED 
; USING "O" OR "CHIMERA" OR "PYMOL".

; ALTERNATIVELY, 

; (1) ONE CAN ALSO ORIENT AND SHIFT THE FITTED PDB FILE TO FIT THE CCP4 
; VOLUME WHICH IS GENERATED FROM THE UNROTATED AND UNSHIFTED SPIDER VOLUME,
; WHICH CAN BE VISUALIZED BY USING "O" OR "CHIMERA" OR "PYMOL". USE PROCEDURE 
; "fit_pdb_to_ccp4.spi" IN THE SPIDER PROCEDURE DIRECTORY"spider/proc/".

; (2) ONE CAN USE "CP TO BRIX" TO CONVERT THE UNROTATED AND UNSHIFTED 
; SPIDER VOLUME TO A BRIX VOLUME WHICH CAN BE USED TO VISUALIZE THE
; FITTED PDB STRUCTURE IN "O" OR "CHIMERA" OR "PYMOL".

;;;;;;;;;;;;;;;;;;;;;;;BEGINING OF INPUT PARAMETERS;;;;;;;;;;;;;;;;;;;

FR L
?INPUT SPIDER VOLUME NAME ?[input]
vol_spi

FR L
?OUTPUT CCP4 VOLUME NAME ?[output]
vol_ccp4.ccp4

;PIXEL SIZE "[ps]"
[ps] = 2.82

;DATA LENGTH FOR CCP4 FILE "[len]"
[len] = 32

;;;;;;;;;;;;;;;;;;;;;;;END OF INPUT PARAMETERS;;;;;;;;;;;;;;;;;;;;;;;;;

; ROTATE THE VOLUME SO THAT X = Y, Y = X AND Z = -Z
RT 3D
[input]
_1
90, 0, 0

RT 3D
_1
_2
0,180,0

RT 3D
_2
_3
180,0,0

; FIND NX, NY AND NZ
FI [NX],[NY],[NZ]
[input]
12,2,1

; FIND THE CENTER IN PIXELS, FOR EVEN DIMENSION, IT IS NX/2 ETC..
; FOR ODD DIMENSION, IT IS (NX/2 + 1) ETC..

[xc] = INT([NX]/2 )
[yc] = INT([NY]/2 )
[zc] = INT([NZ]/2 )

[x] = ([NX]  - 2*[xc])  + [xc]
[y] = ([NY]  - 2*[yc])  + [yc]
[z] = ([NZ]- 2*[zc])  + [zc]

; CALCULATE THE CENTER IN ANGSTROMS
[xa] = [x] * [ps]
[ya] = [y] * [ps]
[za] = [x] * [ps]

; CREATE THE CCP4 FILE
; NOTE: FOR DISPLAY, "CHIMERA" READS THE ORIGIN WHEREAS "O" READS THE STARTING 
; POINTS OF XYZ. ORIGIN IS GIVEN IN ANGSTROMS, STARTING POINTS ARE GIVEN IN PIXELS.
CP TO CCP4
_3
[output] 
[len]
-[x],-[y],-[z]
[ps],[ps],[ps]    
-[xa],-[ya],-[za]
 
EN
 </pre>
</pre>
</body>
</html>