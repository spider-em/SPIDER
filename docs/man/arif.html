<head>
<title>SPIDER: AR IF (Arithmetic operation on image - IF allowed)</title>
   <link rel='stylesheet' href='niceman.css' type='text/css' />
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                 id="spider">    </a></td>
  <td><a href="../user_doc.html"               id="work">      </a></td>
  <td><a href="../operations_doc.html"         id="index">     </a></td>
  <td><a href="../documents.html"              id="help">      </a></td>
  <td><a href="../faq.html"                    id="faq">       </a></td>
  <td><a href="../documents.html#2D"           id="techs">     </a></td>
  <td><a href="../techs/recon1a/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"                id="menu">      </a></td>
  <td><a href="../installation.html"           id="install">   </a></td>
  <td><a href="../release.html"                id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web"> </a></td> 
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>AR IF - Arithmetic operation on image - IF allowed</h2>
<em>(05/28/98)</em><br />
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Performs arithmetic operations point for point on the
input image to create a new output image. The operations
are conditional on the original pixel value, position in
image, and register value(s).
</dl>
<p>
<dl><dt><strong>USAGE</strong></dt>
<p>
<dd>.OPERATION: AR IF<br />
</dd> <dd>&nbsp; &lt;OR&gt; <br />
AR IF [x],[y],[z]
<p>
[If register variables are present on the operation line then the
current value of the column value (x), row value (y),
and slice value (z) are placed in the respective variable.
This allows the logical clauses to access info about
current position in the image.)
<p>
.INPUT FILE: PIC001<br />
[Enter the name of the input image.]
<p>
.OUTPUT FILE: PIC002<br />
[Enter the name of the output image.]
<p>
In the explanation which follows, 'P1' refers to the value
of the current input pixel and 'P2' refers to the value of
the current output pixel. Arithmetic expressions can contain
constants, functions, input pixels, and registers. Valid
logical comparison operators are: .LT., .LE., .EQ., .NE.,
<br />.GE., AND .GT.<br />
<p>
.IF (...) THEN P2=f(P1): IF (P1 .GT. 0.9) THEN P2=-1.0<br />
[Enter 'IF' clause and associated formula to be used to
compute P2 from the P1 in case the 'IF' clause is satisfied. <br />
The 'IF' clause can contain a single arithmetic expression
followed by a logical comparison to a second arithmetic
expression. The 'if' clause must be surrounded by
parenthesis. The 'THEN' delimiter is required.
<p>
Examples of accepted responses: <br />
&nbsp;&nbsp; IF (P1 .LT. 0.1) THEN P2=0.6 <br />
&nbsp;&nbsp; IF (P1 .NE. 0.0) THEN P2=[v1] <br />
&nbsp;&nbsp; IF (P1 .EQ. [v4]) THEN P2=[v2] <br />
&nbsp;&nbsp; IF (P1 .LT. RAN(0)) THEN P2=0.6 <br />
&nbsp;&nbsp; IF (P1 .LT. 0.1) THEN P2=RAN(0) <br />
&nbsp;&nbsp; IF (P1/4 .LT. 0.1) THEN P2=6 <br />
&nbsp;&nbsp; IF ([var].LT. 5) THEN P2=6 <br />
&nbsp;&nbsp; IF (P1 .LT. SIN(P1)) THEN P2=6 <br />
&nbsp;&nbsp; IF (ABS(P1) .LT. P1) THEN P2=P1 <br />
<p>
.ELSE IF (...) THEN P2=f(P1): ELSE IF(P1 .LT. -.9) THEN P2=1.0<br />
[Enter 'ELSE IF' clause and associated formula to be used to
compute P2 from the P1 in case the 'IF' clause is not
satisfied and the currrent 'ELSE IF' clause is satisfied. <br />
The 'ELSE' clause can contain a single arithmetic expression
followed by a logical comparison to a second arithmetic
expression. <br />
The 'ELSE IF' clause must be surrounded by
parenthesis. The 'THEN' delimiter is required. The whole
'ELSE IF' line can be left blank if desired.
<p>
.ELSE FORMULA: P2=RAN(0)<br />
[Enter associated formula to be used to
compute P2 from the P1 in case the 'IF' and 'ELSE IF'
clauses are not satisfied for this pixel. The whole
'ELSE' FORMULA can be left blank if desired.
<p>
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>See documentation for general
<a href=../user_doc.html#expressions>rules</a> of
writing arithmetic expressions and functions in SPIDER.
<p>
<li>Since this operation is interpreting your expressions it
is expected to be very SLOW.
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/arithl.f">ARITHL</a>, <a href="../../src/iftorpn.f">IFTORPN</a>, <a href="../../src/polish.f">POLISH</a>, <a href="../../src/calc.f">CALC</a>, <a href="../../src/charinside.f">CHARINSIDE</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/util2.f">UTIL2</a> 
</dl>
</body>
</html>