<head>
<title>SPIDER: OP (Orientation of Projections in terms of Eulerian angles.)</title>
   <link rel='stylesheet' href='niceman.css' type='text/css' />
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                 id="spider">    </a></td>
  <td><a href="../user_doc.html"               id="work">      </a></td>
  <td><a href="../operations_doc.html"         id="index">     </a></td>
  <td><a href="../documents.html"              id="help">      </a></td>
  <td><a href="../faq.html"                    id="faq">       </a></td>
  <td><a href="../documents.html#2D"           id="techs">     </a></td>
  <td><a href="../techs/recon1a/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"                id="menu">      </a></td>
  <td><a href="../installation.html"           id="install">   </a></td>
  <td><a href="../release.html"                id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web"> </a></td> 
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>OP - Orientation of Projections in terms of Eulerian angles.</h2>
<em>(07/15/05)</em><br />
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Determines orientations of N=&gt;3 projections
in terms of three <a href="../euler.html">Eulerian angles</a>.
</dl>
<p>
<dl><dt><strong>USAGE</strong></dt>
<p>
<dd>.OPERATION: OP<br />
<p>
<dd>.IMAGES: IMG***<br />
[Enter template for 2D image file series.]
<p>
.FILE NUMBERS: 1-11<br />
[Enter file numbers.]
<p>
.LENGTH OF LINE PROJECTION: 79<br />
[Enter length of 1D line projection to be used internally by the
program. The length has to be less than NX.]
<p>
.MINIMUM, MAXIMUM FREQUENCY: 0.0, 0.25<br />
[For each line projection only frequencies between minimum and maximum
will be used. The default is 0.0, 0.5, which is the full
range.]
<p>
.ACCURACY OF THETA: 5<br />
[Enter accuracy of search in terms of theta angle.
Theta accuracy will define a set of quasi-evenly distributed projections
directions to be used in the program. It is the same set as
generated by command 'VO EA' for the same delta theta.]
<p>
.MAXIMUM NUMBER OF CYCLES: 200<br />
[Enter maximum number of cycles the program should perform. In some
cases program may fail to terminate, so to prevent an
endless loop the maximum number of cycles has to set.]
<p>
.DOCUMENT FILE WITH INITIAL ANGLES: initial_angles<br />
[Enter the name of the document file containing initial
<a href="../euler.html">Eulerian angles</a> for 2D images (psi, theta, phi).
The angles can be either random, or can be estimated
by other means.]
<p>
.DOCUMENT FILE: angles002<br />
[Enter the name of the output document file. For each cycle
resulting in a decrease of the discrepancy measure, new
results will be appended to this document file.
Key "-1" will have two columns: the current cycle number
and the current value of the discrepancy measure.
Keys from one to the number of 2D input images specified
will contain <a href="../euler.html">Eulerian angles</a> (psi, theta, phi) found.]
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>Input projections have to be centered.
<p>
<li><a href="../euler.html">Eulerian angles</a> can be used directly in 3D reconstruction
programs to calculate a 3D structure.
<p>
<li>Implemented by P. Penczek.
<p>
<li>Command 'OP' implements orientation search strategy described
in: Penczek P., J. Zhun, J. Frank. A common-lines based method for determining
orientations for N&gt;3 particle projections simultaneously.
Ultramicroscopy, 63, 205-218 (1996).
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/polqs.f">POLQS</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/util3.f">UTIL3</a> 
</dl>
<pre><pre>
; Example

DE
  angsett

; Generate an initial set of random Eulerian angles
[dum]=0.0
DO  [i]=1,16
   [a] = RAN([dum])*360.
   [b] = RAN([dum])*180.
   [c] = RAN([dum])*360.
   SD [i],[a],[b],[c]
   angsett
ENDDO

SD E
  angsett

OP
  ahr***
  1-16
  80
  0.0, 0.156
  5
  20
  angsett
  rangles001

; Calculate 3D structure for the solution found.
DOC CREATE
  select
  1
  1-16

BP RP
  ahr***
  select
  40
  rangles001
  N
  rvol001
  1.0e-4,0.0
  60,0
  0,0
  0.5

EN
</pre>
</pre>
</body>
</html>