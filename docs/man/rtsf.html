<head>
<title>SPIDER: RT SF (Rotate and Shift - image, Fourier based spline interpolation ||)</title>
   <link rel='stylesheet' href='niceman.css' type='text/css' />
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                 id="spider">    </a></td>
  <td><a href="../user_doc.html"               id="work">      </a></td>
  <td><a href="../operations_doc.html"         id="index">     </a></td>
  <td><a href="../documents.html"              id="help">      </a></td>
  <td><a href="../faq.html"                    id="faq">       </a></td>
  <td><a href="../documents.html#2D"           id="techs">     </a></td>
  <td><a href="../techs/recon1a/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"                id="menu">      </a></td>
  <td><a href="../installation.html"           id="install">   </a></td>
  <td><a href="../release.html"                id="new">       </a></td>
  <td><a href="../tips/index.html"             id="tips">      </a></td>
  <td><a href="../../web/docs/web.html"               id="web">       </a></td>
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>RT SF - Rotate and Shift - image, Fourier based spline interpolation ||</h2>
<em>(03/30/12)</em><br />
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Scales, rotates, and shifts image circularly.
(Circularly means image is assumed to be periodic).
Rotates counter-clockwise around the image center
(NX/2 + 1, NY/2 + 1). (Negative angles = clockwise).
Output image has <b>SAME</b> size as input image.
Order: Scales, rotates, then shifts.
&nbsp; <a href="../exa/rtsf.html">Example</a>.
</dl>
<p>
<dl><dt><strong>SEE ALSO</strong>
<p>
<dd><table><tr><td><a href="rtsfm.html"><strong>RT SF M</strong></a></td><td> [Rotate, Shift & Mirror - image, Fourier based spline interpolation ||]</td></tr>
<tr><td><a href="rtsq.html"><strong>RT SQ</strong></a></td><td> [Rotate and Shift - image, Quadratic interpolation ||]</td></tr>
<tr><td><a href="rot.html"><strong>ROT</strong></a></td><td> [ROTate image/volume around center by specified angle(s)]</td></tr>
<tr><td><a href="rb3f.html"><strong>RB 3F</strong></a></td><td> [Rotate, Shift, Back Projection in Fourier space |]</td></tr>
<tr><td><a href="sh.html"><strong>SH</strong></a></td><td> [Shift - using bilinear/trilinear interpolation ||]</td></tr>
<tr><td><a href="shf.html"><strong>SH F</strong></a></td><td> [Shift - using Fourier interpolation ||]</td></tr>
</table></dl>
<p>
<dl><dt><strong>USAGE</strong></dt>
<p>
<dd>.OPERATION: RT SF<br />
<p>
<dd>.INPUT FILE NAME OR TEMPLATE (E.G. STK@****): PIC001<br />
[Enter the name of the file to be transformed. This name can
be for a single file, a whole stack (ending in @), or a
template for a set of images (e.g stack3@****** or
fil***). Templates containing asterisks will have the
astericks substituted with a number for the file.]
<p>
</dd> <dt>If there is only a single input file specified the following
final four prompts appear:
</dd> <dd><div class="opt_inp">
<br />.OUTPUT FILE: rot001<br />
[Enter the name of the file for the rotated and shifted
image.]
<p>
.ROTATION ANGLE, SCALE: 90, 1<br />
[Enter the rotation angle in degrees, and scale factor (&gt;0).
Default scale is set to 1.0 (see Note 2).]
<p>
.X, Y SHIFT : 12.34, -1.98<br />
[Enter the X and Y shift distances.]
</div>
<p>
.OUTPUT IMAGE: out001<br />
[Enter name of the output image files.]
</div>
<p>
</dd> <dt>Otherwise if the input file name contains astericks for
a set of images the following prompts appear:
</dd> <dd><div class="opt_inp">
<p>
.FILE NUMBERS OR SELECTION DOC. FILE NAME: select_03<br />
[Enter the file numbers to be substituted into the file name
template or name of a selection document file that contains
the file numbers in the first register.]
<p>
.REGISTER POSITIONS FOR ANGLE, SCALE, X, &amp; Y SHIFT: 6, 0, 7, 8<br />
[Enter the register positions in the document file where these
parameters are found. If scale register is zero the scale defaults
to 1.0. Note that the first two columns in a document file are
<b>NOT</b> not called registers so the 3'rd column is the
first register. ]
<p>
.ANGLE/SCALE/SHIFT DOCUMENT FILE: ANGDOC<br />
[Name of document file that contains angle in degrees,
scale factor (&gt;0), X, and Y shifts.
<p>
.OUTPUT IMAGE FILE NAME OR TEMPLATE (E.G. STK@****): outstk@***<br />
[Enter template for the names of the output image files.
The rotated and shifted images are placed in these files.
This template can alternatively refer
to a series of single images (e.g. img***), or
to a series of stacked images (e.g stack3@***), or
to a whole stack of images ending in '@' (e.g. stk@).
Templates containing an asterisk will have the astericks substituted
with a number for the file.]
</div>
<p>
</dd> <dt>Otherwise if the input file is a whole stack the following
prompts appear:
<p>
</dd> <dd><div class="opt_inp">
<p>
.REGISTER POSITIONS FOR ANGLE, SCALE, X, &amp; Y SHIFT: 6, 0, 7, 8<br />
[Enter the register positions in the document file where these
parameters are found. If scale register is zero the scale defaults
to 1.0. Note that the first two columns in a document file are
<b>NOT</b> not called registers so the 3'rd column is the
first register. ]
<p>
.ANGLE/SCALE/SHIFT DOCUMENT FILE: ANGDOC<br />
[Name of document file that contains angle in degrees,
scale factor (&gt;0), X, and Y shifts.
<p>
.OUTPUT STACK FILE: STACK03@<br />
[Enter the name of the file where the centerd
images are to be placed. This output file will be a
whole stack. Image numbers within the stack will
correspond to the input stack]
</div>
<p>
</dd> <dt>Different prompt variations occur for other possible combinations
of input and output file stacks.
<p>
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>The operation is done using a single interpolation
of the input image; thus, there is no problem of accumulation of
interpolation errors.
<p>
<li>A change of scale will not change the image dimensions.
<p>
<li>The input file may be three-dimensional. In this case,
each of the slices is separately rotated and shifted with
respect to the z-axis, and stored in the output file, which
will be created with the same X, Y &amp; Z dimensions.
<p>
<li>Shifts can be any real numbers.
<p>
<li>The accuracy of Fourier based bicubic spline (FBS)
interpolation is much better than the
quadratic interpolation used in the
<a href="rtsq.html">'RT SQ'</a> operation.
<p>
<li>It is possible for the output image min. &amp; max. intensities to
be outside the range of the input image.
<p>
<li>Implemented by: G. Kishchenko.
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/rotqss.f">ROTQSS</a>, <a href="../../src/rtsf.f">RTSF</a>, <a href="../../src/fbs2.f">FBS2</a>, <a href="../../src/getdocdat.f">GETDOCDAT</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/util3.f">UTIL3</a> 
</dl>
<!-- Begin Trailer -->
<hr> <small>&copy; <a href="../copyright.html"> 
   Copyright Notice</a> /           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  
   Enquiries: <a href="mailto:spider@wadsworth.org">spider@wadsworth.org</a> </small></a>
<!-- End Trailer -->
</body>
</html>