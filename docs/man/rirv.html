<head>
<title>SPIDER: RI RV (Find ridges and valleys running up/down an image)</title>
   <link rel='stylesheet' href='niceman.css' type='text/css' />
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                 id="spider">    </a></td>
  <td><a href="../user_doc.html"               id="work">      </a></td>
  <td><a href="../operations_doc.html"         id="index">     </a></td>
  <td><a href="../documents.html"              id="help">      </a></td>
  <td><a href="../faq.html"                    id="faq">       </a></td>
  <td><a href="../documents.html#2D"           id="techs">     </a></td>
  <td><a href="../techs/recon1a/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"                id="menu">      </a></td>
  <td><a href="../installation.html"           id="install">   </a></td>
  <td><a href="../release.html"                id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web"> </a></td> 
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>RI RV - Find ridges and valleys running up/down an image</h2>
<em>(3/05/16)</em><br />
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Find vertical ridges and valleys running up/down an image and place
locations in operation line registers.
Originally designed for use with a power spectrum image which has
been converted to a rectangular polar coordinate representation with
rays along the X dimension. See: <a href="por.html">'PO R'</a>.<br />
Each line thus contained a ray from the SPIDER center pixel to
the boundary. The first pixel would have originated from
the origin (center pixel) of a horizontal line halfway
down the image and following rows should be extracted in a
clockwise direction. Can be used for finding ridges in some
some other types of images as well.
&nbsp; <a href="../exa/rirv.html">Example</a>.
</dl>
<p>
<dl><dt><strong>SEE ALSO</strong>
<p>
<dd><table><tr><td><a href="rir.html"><strong>RI R</strong></a></td><td> [Find vertical ridges running up/down an image]</td></tr>
<tr><td><a href="por.html"><strong>PO R</strong></a></td><td> [Convert image to polar representation - rays along X]</td></tr>
<tr><td><a href="roi.html"><strong>RO I</strong></a></td><td> [Rotational average - 2D Image output]</td></tr>
<tr><td><a href="rosd.html"><strong>RO SD</strong></a></td><td> [Rotational average - single line output, doc file]</td></tr>
</table></dl>
<p>
<dl><dt><strong>USAGE</strong></dt>
<p>
<dd>.OPERATION: RI RV [key], [yn],[angn],[rn], [yf],[angf], [rf], [ast]<br />
</dd> <dd>[This operation can return up to seven optional register variables which are same as the
content placed in the output doc file.]
<p>
.INPUT FILE: PIC001<br />
[Enter name of the file which contains a rectangular polar
coordinate representation with rays along the X dimension.]
<p>
.OUTPUT DOC FILE: RIRV_DOC<br />
[Enter name of the doc file which will contain statistics on ridges and valleys which
run up/down the image. These would
correspond to circular/elliptical rings on the original power spectrum.]
<p>
.SEPARATION, SUMMED LINES: 50, 2<br />
[Enter separation or exclusion distance between consecutive ridges and number of image lines
to be summed before finding maxima.
The separation and summed lines inputs allow effective filtration of noisy input images.]
<p>
.MINIMUM DISTANCE FOR FIRST RIDGE, DOC FILE KEY: 150, 1<br />
[Enter minimum distance for first ridge and key number for document file listing.]
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>Implemented by ArDean Leith.
<p>
<li>Document file output. All angles are in degrees clockwise from origin.
<table cellspacing="7">
<tr> <td>Register <br />Column</td> <td> Register Contents <br /> </td> </tr>
<tr valign="top" >
<td>1,</td>
<td>NEAREST RIDGE Y <br /> Y location of line with nearest first ridge. (pixels) </td>
</tr>
<tr valign="top" >
<td>2</td>
<td>ANGLE <br /> Corresponding angle of nearest first ridge. </td>
</tr>
<tr valign="top" >
<td>3</td>
<td>R1 DISTANCE X <br /> Distance to first ridge on line with nearest ridge. (pixels) </td>
</tr>
<tr valign="top" >
<td>4,</td>
<td>FURTHEST RIDGE Y <br /> Y location of line with furthest first ridge. (pixels) </td>
</tr>
<tr valign="top" >
<td>5</td>
<td>ANGLE <br /> Corresponding angle of furthest first ridge. </td>
</tr>
<tr valign="top" >
<td>6</td>
<td>DISTANCE X <br /> Distance to the first ridge on line with furthest ridge. (pixels) </td>
</tr>
<tr valign="top" >
<td>7</td>
<td>ASTIGMATISM <br /> Difference between longest distance to first ridge and shortest distance. (pixels) </td>
</tr>
</table>
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/findridges.f">FINDRIDGES</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/driv1.f">DRIV1</a> 
</dl>
</body>
</html>