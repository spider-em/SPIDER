<head>
<title>SPIDER: DR DIFF (Density Reference - Error &amp; Difference between two volumes)</title>
   <link rel='stylesheet' href='niceman.css' type='text/css' />
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                 id="spider">    </a></td>
  <td><a href="../user_doc.html"               id="work">      </a></td>
  <td><a href="../operations_doc.html"         id="index">     </a></td>
  <td><a href="../documents.html"              id="help">      </a></td>
  <td><a href="../faq.html"                    id="faq">       </a></td>
  <td><a href="../documents.html#2D"           id="techs">     </a></td>
  <td><a href="../techs/recon1a/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"                id="menu">      </a></td>
  <td><a href="../installation.html"           id="install">   </a></td>
  <td><a href="../release.html"                id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web"> </a></td> 
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>DR DIFF - Density Reference - Error &amp; Difference between two volumes</h2>
<em>(2/25/14)</em><br />
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Calculates the mean relative error and the discrepancy
between two volumes within an (optional) mask. A scaling
factor and additive constant is determined to scale the second
volume such that the errors are minimized. Optionally volume 1
is subtracted from the scaled volume 2 and the results stored in
an output volume.
<b>Operation includes all functions of obsolete legacy operation: 'DR ERR'. </b>
&nbsp; <a href="../exa/drdiff.html">Example</a>.
</dl>
<p>
<dl><dt><strong>USAGE</strong></dt>
<p>
<dd>.OPERATION: DR DIFF [f],[con],[dif],[dis]<br />
</dd> <dd>[This operation can return up to four optional register variables:
<p>
<table class="regvar">
<tr><td class="first" align="left"> Variable</td>
<td align="left"> Example </td>
<td align='left'> Receives</td> </tr>
<p>
<tr><td class="first"> First</td>
<td>[f] </td>
<td>Optimum scaling factor</td> </tr>
<p>
<tr><td class="first"> Second</td>
<td>[con] </td>
<td>Offset between 2 volumes</td> </tr>
<p>
<tr><td class="first"> Third</td>
<td>[dif] </td>
<td>Mean relative error</td> </tr>
<p>
<tr><td class="first"> Fourth</td>
<td>[dis] </td>
<td>Discrepancy</td> </tr>
<p>
</table>
<p>
.FIRST VOLUME: 3DR_004<br />
[Enter name of 3-D file]
<p>
.SECOND VOLUME: 3DR_005<br />
[Enter name of second 3-D file]
<p>
.MASK FILE: MASK001<br />
[Enter name of mask file or "*" if no mask is to be applied]
<p>
</dd> <dt>If a mask was specified SPIDER asks:
<p>
</dd> <dd><div class="opt_inp">
<br />.APPLY MASK TO BOTH, SCALING AND DIFFERENCE/ERROR? (Y/N): Y<br />
[Specify if the mask should be applied only in the step of
scaling the two volumes (answer: 'N') or, besides during scaling
also during the error calculation and difference volume
calculation (answer: 'Y)' ]
</div>
<p>
.OUTPUT DIFFERENCE VOLUME: THREEDDIF001<br />
[Enter file name for difference. Enter "*" if no difference
volume is desired.]
<p>
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>Error formulas: <br />
Mean relative error: E = SUM |F*V2-V1-CON| / SUM |V1-AV1| <br />
Discrepancy: E = SQRT [SUM |(F*V2-V1-CON)**2| / SUM |(V1-AV1)**2|] <br />
Where: <br />
V1,V2 = Voxel values of volume 1 and volume 2. <br />
F = Optimum scaling factor. <br />
CON = Offset between the two volumes. <br />
AV1 = Average voxel under mask in volume 1 <br />
<p>
<li>For more details about the error measures see : <br />
Colsher J.G. Iterative Three-dimensional Image Reconstruction
from Tomographic Projections, <i>Computer Graph. &amp; Image Proc.</i> 6,
(1977) 513-537. <br />
Herman G.T. Two Direct Methods for reconstructing
pictures from their projections: A comparative study.
<i>Computer Graph. &amp; Image Proc.</i> 1,(1972) 123-144
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/comp3dmad.f">COMP3DMAD</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/vtil2.f">VTIL2</a> 
</dl>
</body>
</html>