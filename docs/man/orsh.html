<head>
<title>SPIDER: OR SH (Orientation Search - 2D, rotation &amp; shift, uses polar coords. ||)</title>
   <link rel='stylesheet' href='niceman.css' type='text/css' />
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>

<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                 id="spider">    </a></td>
  <td><a href="../user_doc.html"               id="work">      </a></td>
  <td><a href="../operations_doc.html"         id="index">     </a></td>
  <td><a href="../documents.html"              id="help">      </a></td>
  <td><a href="../faq.html"                    id="faq">       </a></td>
  <td><a href="../documents.html#2D"           id="techs">     </a></td>
  <td><a href="../techs/recon1a/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"                id="menu">      </a></td>
  <td><a href="../installation.html"           id="install">   </a></td>
  <td><a href="../release.html"                id="new">       </a></td>
  <td><a href="https://spider-em.github.io/Web" id="web"> </a></td> 
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>OR SH - Orientation Search - 2D, rotation &amp; shift, uses polar coords. ||</h2>
<em>(10/8/14)</em><br />
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Determines rotational and translational orientation using cross
correlation between two images after remappingg into polar coordinates
with optional additional check of mirror transformation.
This is eqivalent to: 'AP SH' but this operation processes a
single pair of images. <br />
(See <a href="../align_overview.html">align_overview.html</a>
for comparison of 'AP' and 'OR' operations.)
&nbsp; <a href="../exa/orsh.html">Example</a>.
</dl>
<p>
<dl><dt><strong>SEE ALSO</strong>
<p>
<dd><table><tr><td><a href="apsh.html"><strong>AP SH</strong></a></td><td> [Alignment - multi-reference, exhaustive rotation & shift ||*]</td></tr>
<tr><td><a href="orr.html"><strong>OR R</strong></a></td><td> [ORientation Search - 2D, rotation, uses polar coords. ||]</td></tr>
<tr><td><a href="ormap.html"><strong>OR MAP</strong></a></td><td> [ORientation MAP - 2D, rotational cross correlation plot ||]</td></tr>
</table></dl>
<p>
<dl><dt><strong>USAGE</strong></dt>
<p>
<dd>.OPERATION: OR SH [rot],[xs],[ys],[mir],[cc]<br />
</dd> <dd>[This operation can return up to five optional register variables:
<table class="regvar">
<tr><td class="first" align="left"> Variable </td>
<td align="left"> Example </td>
<td align='left'> Receives </td> </tr>
<tr><td class="first"> First </td>
<td> [rot] </td>
<td> Rotation angle </td> </tr>
<tr><td class="first"> Second </td>
<td> [xs] </td>
<td> X shift </td> </tr>
<tr><td class="first"> Third </td>
<td> [ys] </td>
<td> Y shift </td> </tr>
<tr><td class="first"> Fourth </td>
<td> [mir] </td>
<td> 1 = mirroring required, 0= no mirroring </td> </tr>
<tr><td class="first"> Fifth </td>
<td> [cc] </td>
<td> Not-normalized correlation coefficient </td> </tr>
</table>
This is the only output from the operation!]
<p>
.REFERENCE IMAGE: REF002<br />
[Enter the name of the file containing the reference
image; dimensions must be same as the input image.]
<p>
.TRANSLATION SEARCH RANGE IN X, IN Y (OPTIONAL), STEP SIZE': 6, 2<br />
[The search for translation parameters will be restricted to
+/- search range, performed every "step size" pixel. <br />
Restrictions: <br />
1. Search range + last ring &lt;= NX/2-2 <br />
2. Search range has to be divisible by step size.] <br />
Speed will depend on square of the number of positions searched.
Use of 'step size' greater than one can speed up
alignment determination with little effect on
final reconstruction resolution. The input for Y shift is
optional, if only two inputs are present the second one is
interpreted as the step size. ]
<p>
.FIRST &amp; LAST RING: 2, 15<br />
[Only polar coordinate radial rings with radii in the range 2-15
will be analyzed for rotational alignment.]
<p>
.EXPERIMENTAL IMAGE: IMG001<br />
[Enter name of the file.]
<p>
.CHECK MIRRORED POSITIONS? (Y/N): Y<br />
[Can also check mirror image of the reference file.]
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>This operation uses the same method as 'AP SH'.
For details see: <br />
Joyeux, L. and P.A. Penczek. Efficiency of 2D alignment methods.
Ultramicroscopy, 92, 33-46 (2002). <br />
<p>
<li>Implemented by: Paul Penczek
<p>
<li>Previously this operation was called 'OR MQ' or 'OR NQ'.
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/apmaster.f">APMASTER</a>, <a href="../../src/aprings.f">APRINGS</a>, <a href="../../src/ap_getdata.f">AP_GETDATA</a>, <a href="../../src/apsh_ss.f">APSH_SS</a>, <a href="../../src/ap_end.f">AP_END</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/util3.f">UTIL3</a> 
</dl>
</body>
</html>